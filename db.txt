Hereâ€™s your **structured MySQL DBMS Lab Guide** with all topics covered, including **NULL handling, Nested Queries, Aggregate Functions, Grouping, Constraints, Views, and Basic CRUD operations.**  

---

# **ðŸ“Œ MySQL DBMS Lab Guide** ðŸš€  

## **1ï¸âƒ£ Basic MySQL Commands**  

### **ðŸ”¹ Create a Database**
```sql
CREATE DATABASE school;
```
ðŸ”¹ Creates a new database named **school**.  

### **ðŸ”¹ Use a Database**
```sql
USE school;
```
ðŸ”¹ Selects the **school** database to work with.  

---

## **2ï¸âƒ£ Creating Tables & Schema**  

### **ðŸ“Œ Students Table**
```sql
CREATE TABLE students (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL,
    age INT CHECK (age > 10),
    email VARCHAR(100) UNIQUE,
    class VARCHAR(10)
);
```
ðŸ”¹ `AUTO_INCREMENT`: Auto-generates `id`.  
ðŸ”¹ `NOT NULL`: Ensures `name` is required.  
ðŸ”¹ `CHECK`: Ensures `age > 10`.  
ðŸ”¹ `UNIQUE`: Ensures no duplicate `email`.  

### **ðŸ“Œ Teachers Table**
```sql
CREATE TABLE teachers (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL,
    subject VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE
);
```
ðŸ”¹ Stores teacher details.  

### **ðŸ“Œ Courses Table**
```sql
CREATE TABLE courses (
    course_id INT PRIMARY KEY AUTO_INCREMENT,
    course_name VARCHAR(50) NOT NULL,
    teacher_id INT,
    FOREIGN KEY (teacher_id) REFERENCES teachers(id)
);
```
ðŸ”¹ Links `teachers` via `teacher_id` (Foreign Key).  

### **ðŸ“Œ Enrollments Table (Many-to-Many Relationship)**
```sql
CREATE TABLE enrollments (
    enrollment_id INT PRIMARY KEY AUTO_INCREMENT,
    student_id INT,
    course_id INT,
    enrollment_date DATE NOT NULL,
    FOREIGN KEY (student_id) REFERENCES students(id),
    FOREIGN KEY (course_id) REFERENCES courses(course_id)
);
```
ðŸ”¹ Links **students** and **courses** (Many-to-Many).  

---

## **3ï¸âƒ£ CRUD Operations (Create, Read, Update, Delete)**  

### **ðŸ”¹ Insert Data (CREATE)**
```sql
INSERT INTO students (name, age, email, class)
VALUES ('John Doe', 15, 'john@example.com', '10A');
```
ðŸ”¹ Adds a new student record.  

### **ðŸ”¹ Read Data (SELECT)**
```sql
SELECT * FROM students;
```
ðŸ”¹ Retrieves all student records.  

### **ðŸ”¹ Update Data (UPDATE)**
```sql
UPDATE students 
SET class = '12B'
WHERE name = 'John Doe';
```
ðŸ”¹ Updates `class` for John Doe.  

### **ðŸ”¹ Delete Data (DELETE)**
```sql
DELETE FROM students WHERE name = 'John Doe';
```
ðŸ”¹ Deletes John Doe's record.  

---

## **4ï¸âƒ£ NULL in SQL Queries**  

### **ðŸ”¹ Find Students with NULL Email**
```sql
SELECT * FROM students WHERE email IS NULL;
```
ðŸ”¹ Finds students without an email.  

### **ðŸ”¹ Set NULL for a Column**
```sql
UPDATE students SET email = NULL WHERE id = 2;
```
ðŸ”¹ Sets email as NULL for a student.  

---

## **5ï¸âƒ£ Nesting of Queries (Subqueries)**  

### **ðŸ”¹ Find Students Enrolled in â€˜DBMSâ€™**
```sql
SELECT name FROM students
WHERE id IN (
    SELECT student_id FROM enrollments 
    WHERE course_id = (SELECT course_id FROM courses WHERE course_name = 'DBMS')
);
```
ðŸ”¹ Finds students taking **DBMS**.  

---

## **6ï¸âƒ£ Aggregate Functions**  

### **ðŸ”¹ Find Total Students**
```sql
SELECT COUNT(*) AS total_students FROM students;
```
ðŸ”¹ Counts the total students.  

### **ðŸ”¹ Find Average Age of Students**
```sql
SELECT AVG(age) AS average_age FROM students;
```
ðŸ”¹ Computes **average** age.  

---

## **7ï¸âƒ£ Grouping (GROUP BY & HAVING)**  

### **ðŸ”¹ Count Students Per Class**
```sql
SELECT class, COUNT(id) AS student_count
FROM students
GROUP BY class;
```
ðŸ”¹ Groups students by class.  

### **ðŸ”¹ Find Classes with More than 5 Students**
```sql
SELECT class, COUNT(id) AS student_count
FROM students
GROUP BY class
HAVING COUNT(id) > 5;
```
ðŸ”¹ **Filters** classes with more than **5 students**.  

---

## **8ï¸âƒ£ General Constraints (Assertions & Triggers)**  

âš  **Note:** MySQL **does not support** `CREATE ASSERTION`, so we use **Triggers** instead.  

### **ðŸ”¹ Prevent a Student from Enrolling in More Than 5 Courses**
```sql
CREATE TRIGGER check_max_courses
BEFORE INSERT ON enrollments
FOR EACH ROW
BEGIN
    DECLARE student_course_count INT;
    SELECT COUNT(*) INTO student_course_count 
    FROM enrollments WHERE student_id = NEW.student_id;
    
    IF student_course_count >= 5 THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Cannot enroll in more than 5 courses';
    END IF;
END;
```
ðŸ”¹ Prevents students from **enrolling in more than 5 courses**.  

---

## **9ï¸âƒ£ Views in SQL**  

### **ðŸ”¹ Create a View for Student Enrollments**
```sql
CREATE VIEW student_enrollments AS
SELECT s.id, s.name, c.course_name, e.enrollment_date
FROM students s
JOIN enrollments e ON s.id = e.student_id
JOIN courses c ON e.course_id = c.course_id;
```
ðŸ”¹ Creates a **virtual table** of student enrollments.  

### **ðŸ”¹ Query the View**
```sql
SELECT * FROM student_enrollments;
```

---

## **ðŸ”Ÿ Miscellaneous Commands**  

### **ðŸ”¹ Show All Databases**
```sql
SHOW DATABASES;
```

### **ðŸ”¹ Show All Tables**
```sql
SHOW TABLES;
```

### **ðŸ”¹ Describe a Table**
```sql
DESC students;
```
or  
```sql
EXPLAIN students;
```

### **ðŸ”¹ View All Constraints**
```sql
SELECT * FROM information_schema.TABLE_CONSTRAINTS 
WHERE table_name = 'students';
```

---

# **ðŸ“Œ Final Schema Overview**  

| Table Name   | Attributes & Constraints |
|-------------|------------------------|
| **students** | id (Primary Key), name (NOT NULL), age (CHECK age > 10), email (UNIQUE), class |
| **teachers** | id (Primary Key), name (NOT NULL), subject (NOT NULL), email (UNIQUE) |
| **courses** | course_id (Primary Key), course_name (NOT NULL), teacher_id (Foreign Key â†’ teachers) |
| **enrollments** | enrollment_id (Primary Key), student_id (Foreign Key â†’ students), course_id (Foreign Key â†’ courses), enrollment_date (NOT NULL) |

---

## **ðŸš€ Summary of Covered Topics**  

âœ… **Basic MySQL Commands** (Database creation, CRUD operations)  
âœ… **NULL Handling in SQL Queries**  
âœ… **Nesting of Queries (Subqueries)**  
âœ… **Aggregate Functions (COUNT, AVG, etc.)**  
âœ… **Grouping (GROUP BY & HAVING)**  
âœ… **General Constraints using Triggers**  
âœ… **Views in SQL (Virtual Tables)**  
âœ… **Miscellaneous Commands (SHOW, DESCRIBE, EXECUTE SQL, etc.)**  

---

âœ… **This guide covers all key DBMS Lab topics with practical MySQL queries!** ðŸš€  
Let me know if you need any modifications or additional explanations! ðŸ˜Š
